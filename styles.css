:root {
    --primary-color: #35C759;
    /* Citymapper Green */
    --etusa-blue: #00d2ff;
    /* ETUSA Blue for Buses */
    --accent-color: #35C759;
    /* Green accent */
    --bg-color: #ffffff;
    /* Clean background */
    --text-main: #333333;
    /* Dark text for readability */
    --text-light: #ffffff;
    /* Light text for headers */
    --text-muted: #8e8e93;
    --card-bg: #ffffff;
    --glass-bg: rgba(255, 255, 255, 0.95);
    --glass-border: rgba(0, 0, 0, 0.05);
    --shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.1);
    --shadow-strong: 0 10px 40px rgba(0, 0, 0, 0.2);
    /* Dark blue used for quick-action icons (consistent with map icons) */
    --icon-dark-blue: #0A5AA3;
    /* Arrivals panel blue (for back badge) */
    --arrivals-blue: rgb(64, 115, 148);
    /* Live radar orange (Citymapper-style) */
    --live-orange: #FFC400;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-tap-highlight-color: transparent;
}

body {
    font-family: 'Outfit', sans-serif;
    background: rgb(64, 115, 148); /* match arrivals panel blue behind rounded corners */
    color: var(--text-main);
    width: 100vw;
    min-height: 100vh;
    /* Allow page to grow */
    overflow-x: hidden;
    /* Disable document-level scroll to remove rubber-band */
    overflow-y: hidden;
    margin: 0;
    padding: 0;
    /* NO padding on body - fixed elements handle safe area themselves */
}

/* Prevent page rubber-band globally; only internal containers may scroll */
html, body {
    height: 100%;
    overscroll-behavior: none;
    overscroll-behavior-y: none;
}

.app-container {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    /* Allow container to grow */
    position: relative;
    background: rgb(64, 115, 148); /* match arrivals panel blue so rounded corners don't show grey */
    /* Extend behind status bar */
    margin-top: 0;
}

/* Utility */
.hidden { display: none !important; }

/* =========================================
   1. TOP MAP SECTION (60%)
   ========================================= */
.map-view-container {
    height: 60vh;
    /* Fixed height that animates */
    position: relative;
    width: 100%;
    z-index: 1;
    overflow: hidden;
    padding-bottom: 0; /* map reaches the container bottom so corners show map */
    margin-bottom: -80px; /* overlap so panel corners sit over the map */
    /* Extend map down - bar will overlap this */
    transition: height 0.3s ease;
    /* Smooth expansion */
    cursor: pointer;
    /* Indicate clickable */
}

/* Expanded map state - 80% */
.map-view-container.expanded {
    height: 80vh;
    /* Expands to 80% */
}

#map-container {
    width: 100%;
    height: 100%;
    min-height: 360px;
    /* Leaflet needs explicit height */
    background: transparent; /* avoid grey showing through at panel corners */
    /* Solid background - no transparency */
    /* Performance optimizations */
    transform: translate3d(0, 0, 0);
    /* Force GPU acceleration */
    will-change: transform;
    /* Hint browser for optimization */
}

/* Header Floating on Map */
.glass-header {
    position: absolute;
    top: calc(11px + env(safe-area-inset-top));
    /* Below status bar */
    left: 16px;
    right: 16px;
    z-index: 1002; /* above arrivals panel (100) */
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Logo Area */
.logo-area {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
}
.logo-area h1 {
    font-family: 'Cairo', sans-serif;
    font-size: 1.4rem;
    font-weight: 800;
    color: var(--primary-color);
    text-shadow: 0 2px 4px rgba(255, 255, 255, 0.8);
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    padding: 6px 12px;
    border-radius: 20px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    margin-top: -5px; /* Nudge Arabic badge up by total 5px */
}

/* Settings badge (gear) placed below the Arabic title */
.settings-badge {
    appearance: none;
    border: none;
    cursor: pointer;
    background: white;
    color: #333;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    display: inline-flex;
    align-items: center;
    justify-content: center;
}
.settings-badge:active { transform: scale(0.98); }

/* Gear icon size inside the settings badge */
.settings-badge svg {
    width: 24px;
    height: 24px;
}

/* Back badge (arrow) shown in bus/walk modes instead of settings */
.back-badge {
    appearance: none;
    border: none;
    cursor: pointer;
    background: var(--arrivals-blue);
    color: #fff;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: fixed; /* keep visible during scroll */
    top: calc(11px + env(safe-area-inset-top));
    left: 16px;
    z-index: 10050; /* ensure above all UI, including arrivals panel */
}
.back-badge svg { width: 20px; height: 20px; }
.back-badge:active { transform: scale(0.98); }

.live-badge {
    background: var(--primary-color);
    color: white;
    font-size: 0.65rem;
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 12px;
    margin-left: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    animation: pulse 2s infinite;
}

.time-display {
    font-family: 'Outfit', sans-serif;
    font-weight: 700;
    font-size: 1.1rem;
    color: #333;
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    padding: 6px 12px;
    border-radius: 20px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

/* Map Overlay Info (Distance) */
.map-overlay-info {
    position: absolute;
    top: 70px;
    /* Below header */
    left: 50%;
    transform: translateX(-50%);
    z-index: 90;
}

.map-distance {
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
}

/* Walking Time Badge (Citymapper Style - Compact) */
.walking-time-badge {
    position: absolute;
    /* Stays with map, not viewport */
    top: calc(11px + env(safe-area-inset-top));
    /* Below status bar/notch */
    right: 16px;
    z-index: 200;
    background: white;
    padding: 8px 12px;
    /* Compact padding */
    border-radius: 20px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    display: flex;
    align-items: center;
    gap: 6px;
    /* Reduced gap */
    font-weight: 700;
    font-size: 0.95rem;
    /* Slightly larger number */
    color: #333; /* Match .map-control-btn icon color */
}

.walking-time-badge .walk-icon {
    color: var(--primary-color);
    width: 20px;
    height: 20px;
}

.walking-time-badge #walk-time-text {
    color: #333;
    font-weight: 700;
}

/* Calorie Badge (appears under walking badge) */
.calorie-badge {
    background: white;
    color: #333;
    padding: 6px 10px;
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-weight: 700;
    font-size: 0.9rem;
    align-self: flex-end; /* right-align within the controls stack */
}
.calorie-badge .cal-icon {
    color: var(--primary-color);
    width: 18px;
    height: 18px;
}

/* Map Controls Stack (Location & Compass) */
.map-controls-stack {
    position: absolute;
    /* Stays with map, not viewport */
    top: calc(70px + env(safe-area-inset-top));
    /* Below walking badge and status bar */
    right: 16px;
    z-index: 200;
    display: flex;
    flex-direction: column;
    align-items: flex-end; /* keep buttons aligned to the right */
    gap: 8px;
}

.map-control-btn {
    width: 44px;
    height: 44px;
    background: white;
    border: none;
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    color: #333;
    position: relative;
}

.map-control-btn:hover {
    background: #f5f5f5;
    transform: scale(1.05);
}

.map-control-btn:active {
    transform: scale(0.95);
    background: var(--primary-color);
    color: white;
}

.compass-label {
    position: absolute;
    bottom: -18px;
    font-size: 0.7rem;
    font-weight: 700;
    color: #333;
}


/* =========================================
   2. FLOATING CONTROLS (Between Map & Arrivals)
   ========================================= */
.floating-controls {
    position: relative;
    /* In document flow, not overlapping */
    width: 100%;
    padding: 0 16px;
    margin-top: -72px;   /* sit correctly between map and panel */
    margin-bottom: -40px;/* slight overlap into panel */
    /* Compensate for overlap into panel */
    z-index: 200;
}

/* When the station selector is moved inside the bottom sheet, remove outside-overlap margins */
.arrivals-panel .floating-controls {
    margin-top: 0;
    margin-bottom: 8px;
    padding: 0 16px;
    z-index: 2; /* above skyline */
}

.station-selector-card {
    background: white;
    border-radius: 16px;
    padding: 16px;
    box-shadow: var(--shadow-strong);
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    transition: transform 0.2s;
}

.station-selector-card:active {
    transform: scale(0.98);
}

.station-info-left {
    display: flex;
    align-items: center;
    gap: 12px;
    overflow: hidden;
}

.station-icon {
    font-size: 1.5rem;
    background: #f0fdf4;
    /* Light green bg */
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
    color: var(--primary-color);
}

.station-text-group {
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

#station-name {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--text-main);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.station-subtext {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.station-select-icon {
    color: var(--text-muted);
    font-size: 1.2rem;
    padding-left: 10px;
}


/* =========================================
   3. ARRIVALS PANEL (Bottom 40%)
   ========================================= */
.arrivals-panel {
    /* Fixed bottom sheet */
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    height: 85vh;                   /* constant sheet height; JS translates to show 40vh collapsed */
    max-height: none;
    background: white;
    border-radius: 24px 24px 0 0;
    box-shadow: none;               /* remove hairline */
    z-index: 1000;                  /* above map/controls; under header/back badge */
    padding: 16px;
    padding-top: 40px;              /* space under station selector area */
    padding-bottom: calc(6px + env(safe-area-inset-bottom)); /* safe area */
    display: flex;
    flex-direction: column;         /* internal layout */
    align-items: stretch;
    overflow: hidden;               /* hide overflow when collapsed */
    touch-action: none;             /* gestures handled by JS for sheet drag */
    transition: height 0.25s ease;  /* smooth height change */
    will-change: height;
}

/* Expanded sheet height (drag up) */
.arrivals-panel.expanded { height: 85vh; /* explicit, same as base */ }

/* Visible sheet grabber for better affordance and touch target */
.sheet-grabber {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 48px;
    height: 6px;
    border-radius: 3px;
    background: rgba(0,0,0,0.18);
    pointer-events: auto; /* receive touch events for reliable drag start */
}

/* When selector bar is hidden (detailed screen), reduce top padding */
.arrivals-panel.no-selector {
    /* Provide room for the stop badge overlay + station name */
    padding-top: 64px;
}

/* Collapsed arrivals when map expanded */
.arrivals-panel.collapsed {
    min-height: 20vh;
    /* 20% when map expanded */
}

/* Walking Time Card */
.walking-time {
    background: var(--primary-color);
    /* Green background like Citymapper 'Walk' */
    color: white;
    padding: 12px 16px;
    border-radius: 12px;
    margin-top: 20px;
    /* Space from controls overlap */
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(53, 199, 89, 0.3);
}

.walk-icon {
    font-size: 1.3rem;
}

/* Routes List */
.routes-header {
    display: flex;
    justify-content: flex-start; /* left align */
    align-items: center;
    margin-top: 12px;               /* space from station selector area */
    margin-bottom: 12px;            /* space above first card */
    padding: 0 16px;                /* align with cards content */
}

.routes-header h3 {
    font-size: 1.1rem;
    color: var(--text-main);
}

.live-indicator {
    font-size: 0.75rem;
    color: var(--primary-color);
    font-weight: 700;
    background: #f0fdf4;
    padding: 4px 8px;
    border-radius: 10px;
}

/* Mode label (Bus) â€“ simple icon + text, no badge */
.mode-label {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: #fff; /* white like Citymapper header */
    font-weight: 800;
    font-size: 1.1rem; /* revert to larger size */
}
.mode-bus-icon {
    color: var(--text-main);
    width: 32px;   /* match .qa-icon svg */
    height: 32px;  /* match .qa-icon svg */
}
.mode-bus-text {
    font-weight: 800;
    font-size: 1.1rem; /* revert to larger size */
    color: #fff;
}

.routes-list {
    display: flex;
    flex-direction: column;
    gap: 16px; /* slightly more space between cards */
    padding-bottom: 20px;
    flex: 1 1 auto;                 /* take remaining space in panel */
    min-height: 0;                  /* allow flex child to shrink for scroll */
    overflow-y: auto;               /* default, will be disabled when not expanded */
    -webkit-overflow-scrolling: touch;
}

/* Disable list scroll when the sheet is collapsed; enable only when expanded */
.arrivals-panel:not(.expanded) .routes-list { overflow: hidden; touch-action: none; }
.arrivals-panel.expanded .routes-list { overflow-y: auto; touch-action: pan-y; }

/* In Bus mode, make the list non-scrollable and let it size to content.
   The sheet itself will expand up to the viewport to reveal items. */
.arrivals-panel.bus-mode .routes-list {
    overflow: hidden;            /* no internal scroll */
    flex: 0 0 auto;              /* do not take remaining space */
    min-height: auto;            /* allow intrinsic height */
    max-height: none;            /* no cap */
    -webkit-overflow-scrolling: auto;
    touch-action: none;          /* gestures reserved for sheet drag */
}

/* Hide scrollbars for bottom-sheet feel */
.routes-list::-webkit-scrollbar { display: none; }
.arrivals-panel::-webkit-scrollbar { display: none; }

/* =============================
   BUS SCREEN: Station Cards
   ============================= */
.station-card {
    background: #fff;
    border: 1px solid #f0f0f0;
    border-radius: 16px;
    padding: 14px 16px 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    position: relative; /* anchor overlay icon */
}

/* Overlay bus icon placed outside the card, aligned above the badge */
.detail-bus-overlay {
    position: absolute;
    left: 26px;   /* 16px card padding + (44 - 24)/2 */
    top: -14px;   /* float above the card edge with small gap */
    z-index: 120; /* above arrivals panel contents */
    pointer-events: none; /* do not block taps */
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.15));
}
.detail-bus-overlay svg { width: 24px; height: 24px; display: block; }

/* Panel-level overlay (for detailed screen) */
.detail-bus-overlay-panel {
    position: absolute;
    left: 16px;   /* align with panel padding */
    top: 12px;    /* inside panel, above first card */
    z-index: 130; /* above cards */
    pointer-events: none;
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.15));
}
.detail-bus-overlay-panel svg { width: 44px; height: 44px; display: block; }
.detail-bus-overlay-row { display: flex; align-items: center; gap: 10px; color: #fff; }
.detail-bus-overlay-name { font-weight: 800; font-size: 1.1rem; line-height: 1; }

.station-header {
    display: flex;
    align-items: center;
    gap: 12px;
    position: relative; /* anchor overlay badge */
}

.station-badge {
    width: 44px; /* square with rounded corners */
    height: 44px;
    border-radius: 10px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-weight: 900;
    font-size: 0.95rem;
    flex: 0 0 44px;
}
.station-badge span { line-height: 1; }

.station-title { flex: 1; min-width: 0; }
.station-name { font-weight: 800; font-size: 1.05rem; color: var(--text-main); }
.station-serves { font-size: 0.85rem; color: var(--text-muted); margin-top: 2px; font-weight: 700; }

.station-distance { font-weight: 800; font-size: 0.9rem; color: var(--text-main); }

.station-divider {
    border-top: 1px solid #eaeaea;
    margin: 10px 0 6px;
}

.station-arrivals { display: flex; flex-direction: column; gap: 8px; }
.station-arrivals.loading { opacity: 0.85; }
.loading-row { display: flex; align-items: center; justify-content: space-between; padding: 6px 0; }
.loading-text { color: var(--text-muted); font-weight: 700; font-size: 0.9rem; }
.spinner-ios {
    width: 18px; height: 18px; display: inline-block; position: relative;
}
.spinner-ios:before, .spinner-ios:after {
    content: ""; position: absolute; inset: 0; border-radius: 50%;
    border: 2px solid rgba(0,0,0,0.15); border-top-color: rgba(0,0,0,0.4);
    animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Apple-style loader (provided by user) */
/* HTML: <div class="loader"></div> */
.loader {
  width: 50px;
  aspect-ratio: 1;
  display: grid;
  border-radius: 50%;
  background:
    linear-gradient(0deg ,rgb(0 0 0/50%) 30%,#0000 0 70%,rgb(0 0 0/100%) 0) 50%/8% 100%,
    linear-gradient(90deg,rgb(0 0 0/25%) 30%,#0000 0 70%,rgb(0 0 0/75% ) 0) 50%/100% 8%;
  background-repeat: no-repeat;
  animation: l23 1s infinite steps(12);
}
.loader::before,
.loader::after {
   content: "";
   grid-area: 1/1;
   border-radius: 50%;
   background: inherit;
   opacity: 0.915;
   transform: rotate(30deg);
}
.loader::after {
   opacity: 0.83;
   transform: rotate(60deg);
}
@keyframes l23 {
  100% {transform: rotate(1turn)}
}

/* Small variant for cards */
.loader-sm { width: 18px; }

.station-arrival-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

/* Left side of arrival row: chip + destination */
.route-left {
    display: inline-flex;
    align-items: center;
    gap: 10px;
}
.chip-dest {
    font-weight: 800;
    color: var(--text-main);
    font-size: 0.95rem;
}

.route-chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 8px;
    border: 1px solid #e6e6e6; /* border-only rounded square */
    border-radius: 10px;
    background: transparent;
}
.route-chip .mini-bus { width: 16px; height: 16px; display: block; }
.route-chip .chip-number { font-weight: 800; font-size: 0.95rem; color: var(--text-main); }

/* Route Item Card */
.route-item {
    background: white;
    border: 1px solid #f0f0f0;
    padding: 14px 16px;
    border-radius: 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
    transition: transform 0.2s;
}

.route-item:active {
    transform: scale(0.98);
    background: #fafafa;
}

.route-info {
    display: flex;
    align-items: center;
    gap: 14px;
    flex: 1;
}

.route-number {
    background: var(--etusa-blue);
    color: white;
    font-weight: 800;
    padding: 6px 10px;
    border-radius: 8px;
    font-size: 1rem;
    min-width: 50px;
    text-align: center;
    box-shadow: 0 2px 5px rgba(0, 210, 255, 0.3);
}

.route-dest {
    font-weight: 700;
    font-size: 1rem;
    color: var(--text-main);
    line-height: 1.2;
}

/* Arrival Time Styling */
.route-time {
    text-align: right;
    min-width: 70px;
}

.route-time .time-inline {
    display: inline-flex;
    align-items: flex-start; /* align icon with top of number */
    gap: 0; /* touch the number */
}
.route-time .live-radar {
    transform: rotate(-50deg);
    transform-origin: center;
    margin-top: 0; /* sit on the same top line as the number */
    width: 14px;
    height: 14px;
}

.time-big {
    font-size: 1.4rem;
    font-weight: 800;
    color: var(--primary-color);
    /* Green time */
    line-height: 1;
}

.time-unit {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-weight: 600;
    text-transform: uppercase;
}

/* Stack for live signal icon above minutes */
.route-time .time-stack {
    display: flex;
    flex-direction: column;
    align-items: center;
    color: var(--primary-color); /* syncs svg stroke via currentColor with minutes color */
}
.route-time .time-stack .live-signal {
    display: block;
    margin-bottom: 4px;
    color: var(--primary-color);
    opacity: 0.95;
}


/* =========================================
   4. MODALS & UTILS
   ========================================= */

/* Station Modal */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(5px);
    display: flex;
    align-items: flex-end;
    /* Sheet style */
    z-index: 1000;
    animation: fadeIn 0.2s ease;
}

.modal-overlay.hidden {
    display: none;
}

.modal-content {
    width: 100%;
    height: 80%;
    /* Takes up most of screen */
    background: white;
    border-radius: 24px 24px 0 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    animation: slideUp 0.3s ease;
}

.modal-header {
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #f0f0f0;
}

.modal-header h3 {
    font-size: 1.2rem;
    color: var(--text-main);
}

.close-btn {
    background: #f2f2f7;
    border: none;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    font-size: 1.2rem;
    color: #666;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

.station-search {
    margin: 16px;
    padding: 12px 16px;
    background: #f2f2f7;
    border: none;
    border-radius: 12px;
    font-size: 1rem;
    font-family: 'Outfit', sans-serif;
    outline: none;
}

.station-search:focus {
    background: #e5e5ea;
    box-shadow: 0 0 0 2px var(--primary-color);
}

.station-list {
    flex: 1;
    overflow-y: auto;
    padding: 0 16px 20px;
}

.station-list-item {
    padding: 16px;
    border-bottom: 1px solid #f0f0f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
}

.station-list-item:active {
    background: #f9f9f9;
}

.station-list-item h4 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-main);
    margin-bottom: 4px;
}

.station-list-item p {
    font-size: 0.85rem;
    color: var(--text-muted);
}


/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes slideUp {
    from {
        transform: translateY(100%);
    }

    to {
        transform: translateY(0);
    }
}

@keyframes pulse {
    0% {
        transform: scale(1);
        opacity: 1;
    }

    50% {
        transform: scale(1.05);
        opacity: 0.8;
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.loading-spinner {
    width: 30px;
    height: 30px;
    border: 3px solid #f0f0f0;
    border-top-color: var(--primary-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 20px auto;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Footer (Hidden mostly but basic styles) */
.glass-footer {
    display: none;
}

.version-footer {
    position: relative;
    height: 140px;                 /* skyline band height */
    background: rgb(64, 115, 148); /* match arrivals panel blue */
    overflow: hidden;              /* clip skyline */
    text-align: center;
    color: #ccc;
    font-size: 0.7rem;
    padding: 0;                    /* no padding to keep exact height */
    margin-top: -2px;              /* pull up slightly more to eliminate hairline */
    border-top: none;              /* ensure no border draws a line */
}

/* Ensure the footer inside the panel renders after content (at the end) */
.arrivals-panel > .version-footer {
    order: 10; /* push to bottom of flex column */
}

/* Hide any global footer outside the panel (panel is fixed and overlays it) */
.app-container > .version-footer { display: none; }

/* Ensure no accidental bottom border on the arrivals panel */
.arrivals-panel { border-bottom: 0; }

/* =============================
   UTILITIES
   ============================= */
.hidden { display: none !important; }

/* =============================
   ARRIVALS PANEL THEME (ALWAYS GREEN)
   ============================= */
.arrivals-panel.panel-green { background: rgb(64, 115, 148); }

/* =============================
   QUICK ACTIONS (Citymapper-style)
   ============================= */
.quick-actions-panel {
    background: rgb(64, 115, 148);  /* blend with panel */
    border-radius: 16px;
    padding: 6px 8px;               /* tighter container padding */
    display: flex;
    gap: 6px;                       /* slightly smaller gap between tiles */
    justify-content: center;
    align-items: center;
    margin: 6px 0 4px 0;            /* sit clearly below the station card */
    box-shadow: none;               /* flat */
}

.qa-btn {
    appearance: none;
    border: none;                   /* no outline */
    background: rgb(60, 107, 139);  /* badge background */
    color: #fff;
    width: 64px;                    /* square tile */
    height: 64px;                   /* square tile */
    padding: 8px;
    border-radius: 12px;            /* rounded square */
    display: flex;
    flex-direction: column;         /* icon above label */
    align-items: center;
    justify-content: center;
    gap: 4px;                       /* bring label closer to icon */
    font-weight: 800;
    letter-spacing: 0.2px;
    box-shadow: none;               /* fully flat */
    transition: transform .15s ease, background .2s ease;
}

.qa-btn:active { transform: scale(0.98); }
.qa-icon { display: flex; align-items: center; justify-content: center; }
.qa-icon svg { width: 32px; height: 32px; }
.qa-icon-walk { color: var(--primary-color); }
.qa-icon-walk svg { width: 29px; height: 29px; transform: translateY(1px); }
.qa-icon-bus svg { transform: translateY(1px); }
.qa-label { font-size: 0.8rem; font-weight: 700; line-height: 1; transform: translateY(-1px); }

/* =============================
   CITY SKYLINE BACKDROP (Algiers-inspired)
   ============================= */
.skyline-bg {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 140px;                 /* skyline band height */
    pointer-events: none;          /* non-interactive */
    z-index: 0;                    /* behind panel content */
}
.skyline-bg svg { width: 100%; height: 100%; display: block; }
.arrivals-panel .quick-actions-panel,
.arrivals-panel .routes-header,
.arrivals-panel .routes-list,
.arrivals-panel .version-footer { position: relative; z-index: 1; }
